<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Togetherness TKJ OnE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== ROBOTIC CYBERPUNK VARIABLES ===== */
        :root {
            --sidebar-width: 320px;
            --sidebar-collapsed-width: 80px;
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --bg-panel: #0f0f0f;
            --text-primary: #00ff88;
            --text-secondary: #00cc66;
            --text-accent: #ff0080;
            --text-warning: #ffaa00;
            --accent-primary: #00ffff;
            --accent-secondary: #ff0080;
            --accent-tertiary: #ffaa00;
            --accent-gradient: linear-gradient(135deg, #00ffff 0%, #ff0080 50%, #ffaa00 100%);
            --border-primary: #00ffff;
            --border-secondary: #ff0080;
            --border-tertiary: #ffaa00;
            --glass-bg: rgba(0, 255, 136, 0.03);
            --glass-border: rgba(0, 255, 136, 0.15);
            --border-radius: 0px;
            --transition-smooth: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --sidebar-bg: linear-gradient(180deg, rgba(10, 10, 10, 0.98) 0%, rgba(15, 15, 15, 0.95) 100%);
            --sidebar-border: rgba(0, 255, 136, 0.3);
            --glow-primary: 0 0 8px rgba(0, 255, 136, 0.4), 0 0 16px rgba(0, 255, 136, 0.2);
            --glow-secondary: 0 0 10px rgba(255, 0, 128, 0.5), 0 0 20px rgba(255, 0, 128, 0.2);
            --glow-tertiary: 0 0 6px rgba(255, 170, 0, 0.3);
            --scan-line: linear-gradient(transparent 50%, rgba(0, 255, 136, 0.03) 50%);
            --grid-pattern: linear-gradient(rgba(0, 255, 136, 0.1) 1px, transparent 1px),
                           linear-gradient(90deg, rgba(0, 255, 136, 0.1) 1px, transparent 1px);
        }
        /* === LOADING SCREEN === */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #000 0%, #111 50%, #000 100%);
            background-size: 400% 400%;
            animation: bgShift 5s ease-in-out infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 9999;
            color: var(--accent-primary);
            text-align: center;
            overflow: hidden;
            box-sizing: border-box;
        }
        @keyframes bgShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        @keyframes progressFill {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .hidden {
            opacity: 0;
        }
        .slide-left {
            transform: translateX(-100%);
        }
        .slide-right {
            transform: translateX(100%);
        }
        .scale-in {
            transform: scale(0);
        }
        .fade-in {
            opacity: 0;
        }
        .fall {
            transform: translateY(-200px);
        }
        .animate-slide-left {
            animation: slideLeft 0.8s ease-out forwards;
        }
        .animate-slide-right {
            animation: slideRight 0.8s ease-out forwards;
        }
        .animate-scale-in {
            animation: scaleIn 0.8s ease-out forwards;
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        .animate-fall {
            animation: fall 0.8s ease-out forwards;
        }
        @keyframes slideLeft {
            0% {
                opacity: 0;
                transform: translateX(-100%);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes slideRight {
            0% {
                opacity: 0;
                transform: translateX(100%);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        @keyframes scaleIn {
            0% {
                opacity: 0;
                transform: scale(0);
            }
            60% {
                opacity: 1;
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes fall {
            0% {
                opacity: 0;
                transform: translateY(-200px);
            }
            60% {
                opacity: 1;
                transform: translateY(20px);
            }
            100% {
                transform: translateY(0);
            }
        }
        .loading{
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100px;
            height: 100px;
            gap: 5px;
        }
        .loading span{
            width: 4px;
            height: 60px;
            background-color: #4cf9f9;
            animation: scale 1.22s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            border-radius: 2px;
            box-shadow: 0 0 8px currentColor;
        }
        .loading span:nth-child(1) { background: #1aff00; animation-delay: -1.29s; }
        .loading span:nth-child(2){ background: #006aff; animation-delay: -1.28s; }
        .loading span:nth-child(3) { background: #ff0000; animation-delay: -1.27s; }
        .loading span:nth-child(4) { background: #ff00f7; animation-delay: -1.26s; }
        .loading span:nth-child(5) { background: #fffb00; animation-delay: -0.25s; }
        .loading span:nth-child(6) { background: #00b7ff; animation-delay: -0.24s; }
        .loading span:nth-child(7) { background: #ff7b00; animation-delay: -1.23s; }
        .loading span:nth-child(8) { background: #00ff66; animation-delay: -0.24s; }
        .loading span:nth-child(9) { background: #1aff00; animation-delay: -0.25s; }
        .loading span:nth-child(10){ background: #006aff; animation-delay: -1.26s; }
        .loading span:nth-child(11) { background: #ff0000; animation-delay: -1.27s; }
        .loading span:nth-child(12) { background: #ff00f7; animation-delay: -1.28s; }
        .loading span:nth-child(13) { background: #fffb00; animation-delay: -1.29s; }
        @keyframes scale {
            0% { transform: scaleY(0.3); opacity: 0.5; }
            10% { opacity: 1; }
            50% { transform: scaleY(1); }
            90% { opacity: 1; }
            100% { transform: scaleY(0.3); opacity: 0.5; }
        }
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            background: var(--accent-primary);
            border-radius: 50%;
            opacity: 0.5;
            animation: float 3s linear infinite;
        }
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 0.15; }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            background-image: var(--grid-pattern);
            background-size: 20px 20px;
            z-index: -1;
            opacity: 0.3;
        }
        #background-overlay::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--scan-line);
            animation: scan 2s linear infinite;
            pointer-events: none;
        }
        @keyframes scan {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100vh); }
        }
        body {
            font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.4;
            --current-padding: var(--sidebar-width);
            padding-left: var(--current-padding);
            transition: var(--transition-smooth);
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--scan-line);
            animation: scan 3s linear infinite;
            opacity: 0.1;
            pointer-events: none;
            z-index: -1;
        }
        body.sidebar-collapsed {
            --current-padding: var(--sidebar-collapsed-width);
        }
        body.sidebar-hidden {
            --current-padding: 0;
        }
        /* ===== SIDEBAR STYLES ===== */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--sidebar-border);
            padding: 1.5rem 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            box-shadow: inset 1px 0 1px rgb(255, 255, 255), 2px 0 20px rgba(75, 74, 74, 0.153);
        }
        .sidebar.collapsed {
            width: var(--sidebar-collapsed-width);
            align-items: center;
        }
        .sidebar.collapsed .sidebar-title,
        .sidebar.collapsed .sidebar-subtitle,
        .sidebar.collapsed .sidebar-nav-link .label {
            display: none;
        }
        .sidebar.collapsed .sidebar-logos img {
            width: 46px;
            height: 46px;
        }
        .sidebar .sidebar-nav-link { padding-left: 1rem; }
        .sidebar.collapsed .sidebar-nav-link { justify-content: center; padding: 1rem 0; }
        .sidebar.collapsed .sidebar-nav-link::after {
            content: attr(data-tooltip);
            position: absolute;
            left: calc(var(--sidebar-collapsed-width) + 12px);
            white-space: nowrap;
            background: rgba(0,0,0,0.85);
            color: #fff;
            padding: 6px 8px;
            border-radius: 8px;
            font-size: 0.9rem;
            transform: translateY(-50%);
            top: 50%;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.18s ease, left 0.18s ease;
            box-shadow: 0 6px 18px rgba(0,0,0,0.5);
            z-index: 1200;
        }
        .sidebar.collapsed .sidebar-nav-link:hover::after { opacity: 1; left: calc(var(--sidebar-collapsed-width) + 18px); }
        .sidebar-title {
            font-size: 1.2rem;
            font-weight: 700;
            text-align: left;
            margin-bottom: 0.25rem;
            color: var(--accent-primary);
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .sidebar-subtitle {
            display: block;
            font-size: 0.95rem;
            font-weight: 400;
            text-align: left;
            margin: 0 0 1rem 0;
            color: var(--text-secondary);
            line-height: 1.35;
            opacity: 0.95;
        }
        .sidebar-nav-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem 1.2rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }
        .sidebar-submenu .sidebar-nav-link {
            padding-left: 2.2rem;
            font-size: 0.95rem;
            background: transparent;
            color: var(--text-secondary);
        }
        .sidebar-nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--accent-gradient);
            transition: left 0.4s ease;
            z-index: -1;
        }
        .sidebar-nav-link:hover {
            color: var(--text-primary);
        }
        .sidebar-nav-link.active {
            background: var(--accent-gradient);
            color: var(--bg-primary);
            font-weight: 600;
        }
        .sidebar-nav-link i {
            width: 24px;
            text-align: center;
        }
        .sidebar-toggle {
            position: fixed;
            top: 12px;
            left: 12px;
            z-index: 1001;
            background: var(--accent-gradient);
            color: var(--bg-primary);
            border: none;
            padding: 0.9rem 1rem;
            border-radius: var(--border-radius);
            font-size: 1.3rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
            width: 50px;
            height: 50px;
            display: none;
            align-items: center;
            justify-content: center;
            min-width: 50px;
            min-height: 50px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .sidebar-toggle::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            cursor: pointer;
            z-index: -1;
        }
        .sidebar-toggle:active {
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(255, 0, 0, 0.4);
        }
        .sidebar-toggle:hover {
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
        }
        .sidebar-toggle i {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }
        .sidebar.active ~ .sidebar-toggle i {
            transform: rotate(90deg);
        }
        .main-content, .developer-content {
            padding: 2rem;
            transition: transform 0.30s ease, padding-left 0.30s ease, margin-right 0.30s ease;
            transform-origin: top left;
        }
        body.sidebar-collapsed .main-content,
        body.sidebar-collapsed .developer-content {
            padding-left: 3rem;
            margin-right: 3rem;
        }
        .search-box {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 1rem;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--glass-border);
            background: var(--glass-bg);
            color: var(--text-primary);
        }
        #clearCacheBtn:hover {
            background: #ff0080;
            box-shadow: 0 0 15px rgba(255, 0, 128, 0.6);
            transform: scale(1.05);
        }
        #clearCacheBtn:active {
            transform: scale(0.98);
        }
        .letter-section {
            margin-bottom: 2.5rem;
        }
        .letter-header {
            font-size: 1.8rem;
            margin: 1.5rem 0 1rem;
            color: var(--accent-primary);
        }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.2rem;
        }
        .gallery-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            overflow: hidden;
            cursor: pointer;
            position: relative;
        }
        .gallery-item .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            display: none;
            background: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            border-radius: 8px;
            width: 90px;
            height: 90px;
        }
        .gallery-item .loading.show {
            display: flex;
        }
        .gallery-item .loading span {
            width: 3px;
            height: 40px;
        }
        .modal .loading {
            margin: 1rem auto;
            display: none;
        }
        .modal .loading.show {
            display: flex;
        }
        .modal .loading span {
            width: 3px;
            height: 40px;
        }
        .search-loading {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            display: none;
        }
        .search-loading.show {
            display: block;
        }
        .gallery-item img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            display: block;
            background: #222;
        }
        .gallery-item-name {
            padding: 0.7rem;
            font-size: 0.95rem;
            text-align: center;
        }
        .gallery-item-date {
            padding: 0 0.7rem 0.7rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-align: center;
        }
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
            z-index: 2200;
        }
        .modal.show {
            display: flex;
        }
        .modal-dialog {
            max-width: 930px;
            width: 95%;
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 14px;
            box-shadow: 0 20px 20px rgba(255, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .close-btn {
            position: absolute;
            right: 18px;
            top: 12px;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .close-btn:hover {
            transform: scale(1.9);
        }
        .modal-image {
            max-width: 100%;
            max-height: 70vh;
            border-radius: 10px;
            object-fit: contain;
            -webkit-user-drag: none;
            -webkit-touch-callout: none;
            pointer-events: auto;
            user-select: none;
            -webkit-user-select: none;
        }
        .modal-info {
            width: 100%;
            padding: 10px 6px;
        }
        .modal-name {
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
        }
        .modal-date {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-top: 0.4rem;
        }
        .modal-actions {
            margin-top: 0.6rem;
            text-align: center;
        }
        .download-btn {
            padding: 0.5rem 0.9rem;
            border-radius: 10px;
            border: none;
            background: var(--accent-primary);
            color: #fff;
            cursor: pointer;
            transition: var(--transition-smooth);
            transform: translateY(0);
            position: relative;
            overflow: hidden;
        }
        .download-btn:hover {
            box-shadow: 0 20px 15px rgba(255, 0, 0, 0.4);
        }
        .download-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .download-btn.loading::after {
            content: '';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.25);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.9s linear infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .developer-content {
            padding: 2rem;
        }
        .sidebar-profile {
            max-width: 500px;
            margin: 0 auto;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 0, 0, 0.05));
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 20px 20px rgba(255, 0, 0, 0.4);
        }
        .sidebar-profile img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-primary);
        }
        .sidebar-profile > div:nth-of-type(1) {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 0.8rem;
        }
        .sidebar-logos img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-primary);
            box-shadow: 0 20px 20px rgba(177, 177, 177, 0.4);
        }
        .sidebar-profile p {
            color: var(--text-secondary);
            margin-top: 0.8rem;
            line-height: 1.6;
        }
        .sidebar-profile a {
            display: inline-flex;
            align-items: center;
            gap: 0.6rem;
            padding: 0.7rem 1.2rem;
            background: #25D366;
            color: #fff;
            border-radius: 999px;
            margin-top: 0.8rem;
            text-decoration: none;
            transition: var(--transition-smooth);
        }
        .sidebar-profile a:hover {
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
        }
        .sidebar-collapse {
            position: absolute;
            bottom: 25px;
            left: 97%;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.06);
            color: var(--text-primary);
            padding: 8px 10px;
            border-radius: 999px;
            cursor: pointer;
            display: flex;
            gap: 8px;
            align-items: top;
            justify-content: top;
            transition: transform 0.2s ease, background 0.2s ease;
            z-index: 1100;
        }
        .sidebar-collapse:hover { transform: translateX(-50%) scale(1.03); }
        .sidebar.collapsed .sidebar-collapse i { transform: rotate(180deg); }
        .keyboard-shortcuts-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 8px;
            padding: 1rem;
            color: var(--text-secondary);
            font-size: 0.85rem;
            max-width: 250px;
            z-index: 1050;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }
        .keyboard-shortcuts-hint.show {
            opacity: 1;
            visibility: visible;
        }
        .keyboard-shortcuts-hint h4 {
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        .keyboard-shortcuts-hint p {
            margin: 0.3rem 0;
            line-height: 1.4;
        }
        .keyboard-shortcuts-hint kbd {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 3px;
            padding: 2px 6px;
            font-family: monospace;
            color: var(--text-primary);
            font-size: 0.8rem;
        }
        /* === CONTENT PROTECTION === */
        body, * {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-touch-callout: none;
        }
        input, textarea {
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }
        img {
            -webkit-user-drag: none;
            -webkit-touch-callout: none;
            pointer-events: auto;
        }
        @media (max-width: 768px) {
            body {
                padding-left: 0;
                padding-top: 50px;
            }
            .sidebar-toggle {
                display: flex;
            }
            .sidebar {
                width: 100%;
                left: -100%;
                transition: left 0.3s ease;
            }
            .sidebar.active {
                left: 0;
            }
            .gallery-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            .gallery-item img {
                height: 100px;
            }
        }

        /* === FAST MODE (disable animations/transitions) === */
        .fast-mode *,
        .fast-mode *::before,
        .fast-mode *::after {
            animation: none !important;
            transition: none !important;
        }
        .fast-mode {
            scroll-behavior: auto !important;
        }

        /* === PASTE BUTTON STYLE === */
        #pasteCodeBtn {
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
            transition: all 0.3s ease;
        }
        #pasteCodeBtn:hover {
            background: rgba(0, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.6), inset 0 0 10px rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        #pasteCodeBtn:active {
            transform: translateY(0);
            box-shadow: 0 0 8px rgba(0, 255, 255, 0.4);
        }

        /* === GET CODE BUTTON STYLE === */
        #getCodeBtn {
            transition: all 0.25s ease;
            box-shadow: 0 0 6px rgba(0, 255, 136, 0.08);
        }
        #getCodeBtn:hover {
            background: var(--accent-primary);
            color: #000;
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.18), inset 0 0 8px rgba(255,255,255,0.03);
            transform: translateY(-2px);
        }
        #getCodeBtn:active {
            transform: translateY(0);
            box-shadow: 0 0 8px rgba(0, 255, 136, 0.12);
        }
    </style>
</head>
<body class="sidebar-hidden">
    <!-- LOADING SCREEN -->
    <div id="loading-screen">
        <div class="particles" id="particles"></div>
        <div class="loading-content">
            <i class="fa-solid fa-laptop-code fa-4x main-icon hidden slide-left"></i>
            <h1 id="loading-text" class="hidden slide-right"></h1>
            <div class="sub-icons">
                <i class="fa-brands fa-github fa-2x hidden scale-in"></i>
                <i class="fa-solid fa-code fa-2x hidden scale-in"></i>
                <i class="fa-solid fa-user fa-2x hidden scale-in"></i>
            </div>
            <h2 id="designer-text2" class="hidden fade-in">-</h2>
            <h2 id="designer-text" class="hidden fall">DEVELOPER : ZHYLLAN</h2>
        </div>
        <div class="loading">
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span><span></span><span></span>
            <span></span><span></span><span></span>
        </div>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
    </div>

    <!-- LOGIN MODAL OVERLAY -->
    <div id="loginModal" style="position:fixed;top:0;left:0;width:100%;height:100%;display:none;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,0.85);z-index:9998;">
        <h2 style="color:#00ff88;margin-bottom:20px;">üîê Masukkan Kode Akses</h2>
        <div style="display:flex;gap:10px;align-items:center;margin-bottom:12px;">
            <input type="text" id="accessCode" placeholder="Kode dari halaman dapatkan kode akses" style="padding:12px;width:300px;text-align:center;background:#111;color:#00ff88;border:1px solid #00ff88;border-radius:6px;">
            <button id="pasteCodeBtn" onclick="pasteCodeFromClipboard()" style="padding:12px 20px;background:var(--accent-primary);color:#000;border:none;border-radius:6px;cursor:pointer;font-weight:bold;white-space:nowrap;transition:all 0.3s;" title="Tempel kode dari clipboard">üìã Tempel</button>
        </div>
        <div id="errorMsg" style="color:#ff6b6b;margin-top:12px;"></div>
        
        <!-- IDENTIFIKASI SECTION -->
        <div id="identifikasiSection" style="display:none;margin-top:25px;padding:20px;background:rgba(0,255,136,0.1);border:1px solid rgba(0,255,136,0.3);border-radius:8px;width:300px;text-align:left;">
            <h3 style="color:var(--accent-primary);margin-bottom:15px;font-size:1rem;">üìã Identifikasi :</h3>
            <p style="color:var(--text-secondary);margin:8px 0;"><strong>Nama :</strong></p>
            <p id="displayName" style="color:#00ff88;margin:5px 0 15px 0;background:rgba(0,0,0,0.5);padding:8px;border-radius:4px;word-break:break-all;"></p>
            <p style="color:var(--text-secondary);margin:8px 0;"><strong>Password :</strong></p>
            <p id="displayPasswordFinal" style="color:#00ff88;margin:5px 0 0 0;background:rgba(0,0,0,0.5);padding:8px;border-radius:4px;word-break:break-all;letter-spacing:2px;"></p>
        </div>

        <!-- BUTTONS: placed under identifikasi and preview -->
        <div style="display:flex;gap:12px;margin-top:18px;">
            <button id="loginConfirmBtn" onclick="verifyCode()" style="flex:1;padding:10px 20px;background:#ff0080;color:white;border:none;border-radius:6px;cursor:pointer;">Masuk</button>
            <a id="getCodeBtn" href="https://code-dt9.pages.dev/" target="_blank" rel="noopener noreferrer" title="Buka halaman untuk mendapatkan kode akses" style="flex:1;padding:10px 20px;background:transparent;color:var(--accent-primary);border:1px solid var(--accent-primary);border-radius:6px;display:inline-flex;align-items:center;justify-content:center;text-decoration:none;cursor:pointer;">Dapatkan Kode</a>
            <button id="openMembersBtn" type="button" onclick="openMembersModal()" style="flex:1;padding:10px 20px;background:var(--accent-primary);color:#000;border:none;border-radius:6px;cursor:pointer;">Buka Tabel</button>
        </div>
    </div>

    <!-- MAIN APP (SIDEBAR + CONTENT) -->
    <div id="mainApp" style="display:none;">
        <button class="sidebar-toggle" id="sidebarToggle"><i class="fas fa-bars"></i></button>
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-logos">
                <img src="https://i.ibb.co.com/twpD1fqr/Whats-App-Image-2025-11-16-at-12-05-11-0adeacb0.jpg" alt="Logo">
            </div>
            <div class="sidebar-title">Togetherness TKJ OnE</div>
            <div class="sidebar-subtitle">Kenangan dari semua, untuk bersama</div>
            <nav>
                <a href="#" class="sidebar-nav-link" data-filter="all"><i class="fas fa-images"></i> <span class="label">SEMUA FOTO</span></a>
                <a href="#" class="sidebar-nav-link active" data-filter="group"><i class="fas fa-users"></i> <span class="label">FOTO BERSAMA</span></a>
                <a href="#" class="sidebar-nav-link" data-filter="male"><i class="fas fa-mars"></i> <span class="label">FOTO COWOK</span></a>
                <a href="#" class="sidebar-nav-link" data-filter="female"><i class="fas fa-venus"></i> <span class="label">FOTO CEWEK</span></a>
                <a href="#" class="sidebar-nav-link" data-filter="video"><i class="fas fa-video"></i> <span class="label">VIDEO</span></a>
                <a href="#" class="sidebar-nav-link" data-target="about"><i class="fas fa-user"></i> <span class="label">INFO DEVELOPER</span></a>
                <a href="#" class="sidebar-nav-link" data-target="members"><i class="fas fa-users-viewfinder"></i> <span class="label">ANGGOTA TKJ 1</span></a>
            </nav>
            <button id="sidebarCollapse" class="sidebar-collapse" aria-label="Alihkan sidebar"> <i class="fas fa-chevron-left"></i> </button>
        </aside>

        <main class="main-content" id="section-all">
            <div id="security-notice" class="security-notice" style="text-align:center;margin:2rem 0;padding:2rem;background: rgba(0,0,0,0.8);border:1px solid rgba(255,255,255,0.1);border-radius:var(--border-radius);">
                <h3 style="color:var(--accent-primary);margin-bottom:1rem;">üîí Keamanan Konten</h3>
                <p style="color:var(--text-secondary);margin-bottom:1rem;">Foto-foto ini dilindungi. Dilarang keras mengambil screenshot, mendownload, atau menyebarkan tanpa izin.</p>
                <p style="color:#ff6b6b;font-size:0.9rem;margin-bottom:1rem;">‚ö†Ô∏è Pelanggaran akan dikenai sanksi hukum</p>
                <button id="accept-security-btn" style="padding:0.5rem 1rem;border-radius:8px;border:none;background:var(--accent-primary);color:#fff;cursor:pointer;">Saya Mengerti & Lanjutkan</button>
            </div>
            <div id="searchWrapper" style="display:none;">
                <div style="display:flex;gap:10px;margin-bottom:1rem;flex-wrap:wrap;align-items:center;">
                    <input type="text" id="searchInput" class="search-box" placeholder="Cari Sosue Tanggal Ato Nomor fotonyo Yo kawen..." style="flex:1;min-width:200px;">
                    <button id="clearCacheBtn" style="padding:0.8rem 1.5rem;background:#ff0080;color:white;border:1px solid #ff0080;border-radius:4px;cursor:pointer;font-weight:bold;transition:all 0.3s;white-space:nowrap;" title="Hapus semua cache dan refresh">üóëÔ∏è Hapus Cache</button>
                </div>
            </div>
            <h2 id="main-title" style="display:none;">SEKEDAR POINGEK</h2>
            <div class="sidebar-subtitle" id="main-subtitle" style="display:none;">
                <h4>Sado fitur sodang dalom tahap pongombangen,joku indo stabil,sabar yo kawen,maklum,sodang boajaüôèüòä,boborapo fitur kadang di apuh,jo di ubah,bak bisa juo jalen di hp low-end</h4>
                <h4><br>web ko pake sistem cache,bak lancar mombukak untuok sotoruhnyo, tapi lambek di bukak portamo kali, usahoken kawen-kawen ocok mongapuh cachenyo yo,bak dapek pembaruan foto baru,tombol apuhnyo di palieng bawah yo</h4>
            </div>
            <div id="noResultsMessage" style="text-align:center;margin:2rem 0;color:var(--text-secondary);display:none;">
                Tanggal atau nomor foto: "<span id="searchedTerm"></span>" Indo Dapek,Typo Kawen Joku,Cubo Cek Baliek
            </div>
            <div id="searchLoadingContainer" class="search-loading">
                <div class="loading" style="margin: 0 auto;">
                    <span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span>
                </div>
                <p style="margin-top:1rem;">Sedang mencari...</p>
            </div>
            <div id="galleryContainer"></div>
            <div id="statsFooter" style="margin-top:2rem;padding:1.5rem;background:rgba(0,255,136,0.05);border:1px solid rgba(0,255,136,0.2);border-radius:4px;text-align:center;color:var(--text-secondary);">
                <span id="photoStats">Total: 0 foto | Ditampilkan: 0 foto</span>
            </div>
        </main>

        <main class="developer-content" id="section-about" style="display:none;">
            <div class="sidebar-profile">
                <img src="https://i.ibb.co/Fqy0Dgdj/4-Nov-14-35-lmc-8-4-1.jpg" alt="Zhyllan">
                <div>ZHYLLAN FYLLAH</div>
                <p>Website ko,songajo aku buek untuok kawen-kawen ku sadonyo,bak bisa mondownload sado kenangen di smk tu,bak jangen tingga corito ajo<blockquote><br> Sado isi web iko dari bosamo,untuok bosamo,jangen sampe monyebarken link nyo yo,tosebar aib beko jadinyo.</blockquote></p>
                <p><br>Torimokasih untuok kawen-kawen non olah mongirim foto-nyo ko aku,kalau indok lai,joku web ko indo boisi tudo,kalau ondak mongirim foto,botanyo,jo nonlainnyo,klik tombol di bawahyo,baru beko di web portofolioku,klik tombol "chat di whatsapp",tosorahla ondak chat apo ajo,sekian yo,assalamualaikum.<blockquote>===ZHYLLAN FYLLAH===</blockquote></p>
                <a href="https://jirankun.github.io/portofoliozhyllan" target="_blank">
                    <i class="fas fa-user"></i> Buka Web folio Developer
                </a>
                <div style="margin-top:18px;padding:12px;border-top:1px solid rgba(255,255,255,0.04);">
                    <h4 style="color:var(--text-primary);margin:6px 0 10px 0;">Pengaturan Developer</h4>
                    <label style="display:flex;align-items:center;gap:10px;cursor:pointer;">
                        <input id="fastModeToggle" type="checkbox" style="width:18px;height:18px;" />
                        <span style="color:var(--text-secondary);">Mode Fast (Tanpa Animasi)</span>
                    </label>
                    <p style="color:var(--text-secondary);font-size:0.9rem;margin-top:8px;">Aktifkan untuk menonaktifkan semua animasi dan transisi (berguna untuk perangkat lambat atau uji kecepatan).</p>
                </div>
            </div>
        </main>
    </div>

    <!-- MODAL -->
    <div class="modal" id="imageModal" onclick="closeModal()">
        <div class="modal-dialog" onclick="event.stopPropagation()">
            <button class="close-btn" aria-label="Tutup" onclick="closeModal()">&times;</button>
            <div id="modalLoadingContainer" class="loading" style="display:none;">
                <span></span><span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span>
            </div>
            <img id="modalImage" class="modal-image" src="" alt="Gambar">
            <video id="modalVideo" class="modal-image" src="" alt="Video" controls style="display:none;"></video>
            <div class="modal-info">
                <div id="modalName" class="modal-name"></div>
                <div id="modalDate" class="modal-date"></div>
                <div class="modal-actions">
                    <button id="downloadBtn" class="download-btn" onclick="downloadImage()">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MEMBERS MODAL -->
    <div class="modal" id="membersModal" onclick="closeMembersModal()">
        <div class="modal-dialog" style="max-width: 700px; max-height: 80vh; overflow-y: auto;" onclick="event.stopPropagation()">
            <button class="close-btn" aria-label="Tutup" onclick="closeMembersModal()">&times;</button>
            <h2 style="color: var(--text-primary); margin-bottom: 20px; text-align: center;">ANGGOTA TKJ 1</h2>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: linear-gradient(135deg, #00ff88, #00ffff); color: #000; font-weight: bold;">
                            <th style="padding: 12px; text-align: left; border: 1px solid #00ff88;">No</th>
                            <th style="padding: 12px; text-align: left; border: 1px solid #00ff88;">Nama Anggota</th>
                        </tr>
                    </thead>
                    <tbody id="membersTableBody">
                        <!-- Akan diisi dengan JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- KEYBOARD SHORTCUTS HINT -->
    <div class="keyboard-shortcuts-hint" id="keyboardShortcutsHint">
        <h4>‚å®Ô∏è Keyboard Shortcuts</h4>
        <p><kbd>C</kbd> - Toggle Sidebar</p>
        <p><kbd>M</kbd> - Menu (Mobile)</p>
        <p><kbd>D</kbd> - Download (Modal)</p>
        <p><kbd>ESC</kbd> - Close Modal</p>
        <p><kbd>R</kbd> - Clear Cache</p>
        <p><kbd>?</kbd> - Help</p>
    </div>

    <script>
        // === DOWNLOAD HANDLER ===
        function downloadImage() {
            try {
                const img = document.getElementById('modalImage');
                const video = document.getElementById('modalVideo');
                const downloadBtn = document.getElementById('downloadBtn');
                
                if (!downloadBtn) return;
                
                let fileUrl = '';
                let fileName = document.getElementById('modalName').textContent || 'download';
                
                // Tentukan URL file (gambar atau video)
                if (img && img.style.display !== 'none' && img.src) {
                    fileUrl = img.src;
                    fileName = fileName + '.jpg';
                } else if (video && video.style.display !== 'none' && video.src) {
                    fileUrl = video.src;
                    fileName = fileName + '.mp4';
                }
                
                if (!fileUrl) {
                    alert('‚ùå File tidak ditemukan');
                    return;
                }
                
                // Update button state
                const originalHTML = downloadBtn.innerHTML;
                downloadBtn.disabled = true;
                downloadBtn.classList.add('loading');
                downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Mendownload...';
                
                // Buat request untuk download
                fetch(fileUrl)
                    .then(response => {
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.blob();
                    })
                    .then(blob => {
                        // Buat URL blob
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = fileName;
                        document.body.appendChild(a);
                        a.click();
                        
                        // Cleanup
                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(a);
                        
                        // Reset button
                        downloadBtn.disabled = false;
                        downloadBtn.classList.remove('loading');
                        downloadBtn.innerHTML = originalHTML;
                        
                        alert('‚úÖ Download selesai!');
                    })
                    .catch(err => {
                        console.error('Download error:', err);
                        downloadBtn.disabled = false;
                        downloadBtn.classList.remove('loading');
                        downloadBtn.innerHTML = originalHTML;
                        alert('‚ùå Gagal mendownload file: ' + err.message);
                    });
            } catch (e) {
                console.error('Error in downloadImage:', e);
                alert('‚ùå Terjadi kesalahan: ' + e.message);
            }
        }

        // ‚úÖ DAFTAR NAMA YANG DIIZINKAN (ISI SESUAI KEBUTUHANMU)
        const ALLOWED_NAMES = [
            "Abiyu Anugrah",
            "Aktsar Hakim Nst",
            "Amalia Safitri",
            "Amir Hamzah",
            "Asra Bilhuda",
            "Eli Zahara",
            "Ezyla Aziz Zeira",
            "Fadel Muhammad Rezki",
            "Faizul Adzimi",
            "Faldho Adzani",
            "Fitria Mulia",
            "Galang Luqmanul Hakim",
            "Hafif Mabrur",
            "Kasifa Rahmah",
            "Keysa Putri Ramadani",
            "M. Rafiki Rasli",
            "Muhammad Hibban Aulia",
            "Muhammad Yudha Pratama",
            "Najia Atika Sahira",
            "Najwa Asyifa",
            "Rafi Idham",
            "Ranti Amelia",
            "Rasima Handayani",
            "Reviansyah",
            "Reza Ardiansyah",
            "Sakinah Khanza",
            "Salimah",
            "Salsa Bila",
            "Susi Saskia",
            "Syah Ratul Faiza",
            "Thalita Syafa Harahap",
            "Tonius Nduru",
            "Yennisa Mulia",
            "Yuda Setriawan",
            "Zhyllan Fyllah"
        ];

        // === Fungsi dekripsi kode akses ===
        function hashPass(pass) {
            let h = 0;
            for (let c of pass) h = Math.imul(h ^ c.charCodeAt(), 1540483477) >>> 0;
            return h;
        }
        const CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        function codeToText(code, pass) {
            let clean = code.replace(/-/g, '');
            if (clean.length % 2 !== 0) throw new Error("Kode rusak");
            const seed = hashPass(pass);
            let out = '';
            for (let i = 0; i < clean.length; i += 2) {
                const a = CHARS.indexOf(clean[i]);
                const b = CHARS.indexOf(clean[i+1]);
                if (a === -1 || b === -1) throw new Error("Karakter tidak valid");
                const val = a * CHARS.length + b;
                const offset = (seed + (i/2) * 41) % CHARS.length;
                const orig = (val - offset + 256) % 256;
                out += String.fromCharCode(orig);
            }
            return out;
        }

        // === Verifikasi kode akses ===
        // === Fungsi Paste dari Clipboard ===
        async function pasteCodeFromClipboard() {
            try {
                // Coba menggunakan Clipboard API modern
                const text = await navigator.clipboard.readText();
                document.getElementById('accessCode').value = text.trim();
                document.getElementById('errorMsg').textContent = "‚úÖ Kode berhasil ditempel!";
                document.getElementById('errorMsg').style.color = '#00ff88';
                setTimeout(() => {
                    document.getElementById('errorMsg').textContent = '';
                }, 2000);
            } catch (err) {
                // Fallback untuk browser yang tidak support Clipboard API
                document.getElementById('errorMsg').textContent = "‚ùå Gagal mengakses clipboard. Pastikan browser mengizinkan akses.";
                document.getElementById('errorMsg').style.color = '#ff6b6b';
                console.error('Clipboard error:', err);
            }
        }

        function verifyCode() {
            const code = document.getElementById('accessCode').value.trim();
            const errorMsg = document.getElementById('errorMsg');
            const SHARED_SECRET = "tkjone";
            if (!code) {
                errorMsg.textContent = "‚ö†Ô∏è Masukkan kode akses!";
                return;
            }
            try {
                const name = codeToText(code, SHARED_SECRET);
                if (ALLOWED_NAMES.includes(name)) {
                    // Simpan user info
                    localStorage.setItem('logged_in_user', name);
                    localStorage.setItem('user_code', code);
                    
                    // Tampilkan identifikasi
                    const identifikasiSection = document.getElementById('identifikasiSection');
                    const displayName = document.getElementById('displayName');
                    const displayPasswordFinal = document.getElementById('displayPasswordFinal');
                    
                    if (identifikasiSection && displayName && displayPasswordFinal) {
                        displayName.textContent = name;
                        displayPasswordFinal.textContent = code;
                        identifikasiSection.style.display = 'block';
                    }
                    
                    // Set timeout 3 detik sebelum redirect
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                        document.getElementById('loginModal').style.display = 'none';
                        document.getElementById('mainApp').style.display = 'block';
                        showMainContent();
                    }, 3000);
                } else {
                    errorMsg.textContent = "‚ùå Nama tidak dikenali. Akses ditolak.";
                }
            } catch (e) {
                errorMsg.textContent = "‚ùå Kode tidak valid.";
                console.error(e);
            }
        }



        // === Cek apakah sudah login ===
        function checkLoggedInUser() {
            const user = localStorage.getItem('logged_in_user');
            if (user) {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('mainApp').style.display = 'block';
                showMainContent();
                return true;
            }
            return false;
        }

        // === Tampilkan konten utama ===
        function showMainContent() {
            document.body.classList.remove('sidebar-hidden');
        }

        // === Security notice ===
        document.getElementById('accept-security-btn').addEventListener('click', () => {
            const notice = document.getElementById('security-notice');
            notice.style.display = 'none';
            document.getElementById('searchWrapper').style.display = 'block';
            document.getElementById('main-title').style.display = 'block';
            document.getElementById('main-subtitle').style.display = 'block';
            localStorage.setItem('security_accepted', JSON.stringify({ timestamp: Date.now() }));
            loadPhotosFromDB();
        });

        // === Cek cache security ===
        function checkSecurityCache() {
            const cached = localStorage.getItem('security_accepted');
            if (cached) {
                try {
                    const { timestamp } = JSON.parse(cached);
                    if (Date.now() - timestamp < 24 * 60 * 60 * 1000) {
                        document.getElementById('security-notice').style.display = 'none';
                        document.getElementById('searchWrapper').style.display = 'block';
                        document.getElementById('main-title').style.display = 'block';
                        document.getElementById('main-subtitle').style.display = 'block';
                        loadPhotosFromDB();
                        return true;
                    }
                } catch (e) {}
            }
            return false;
        }

        // === Loading screen animation ===
        document.addEventListener("DOMContentLoaded", () => {
            const loadingText = document.getElementById("loading-text");
            const mainIcon = document.querySelector(".main-icon");
            const subIcons = document.querySelectorAll(".sub-icons i");
            const designerText = document.getElementById("designer-text");
            const designerText2 = document.getElementById("designer-text2");
            const loadingScreen = document.getElementById("loading-screen");

            function showElement(el, delay) {
                setTimeout(() => {
                    el.classList.remove("hidden");
                    if (el.classList.contains("slide-left")) el.classList.add("animate-slide-left");
                    else if (el.classList.contains("slide-right")) el.classList.add("animate-slide-right");
                    else if (el.classList.contains("scale-in")) el.classList.add("animate-scale-in");
                    else if (el.classList.contains("fade-in")) el.classList.add("animate-fade-in");
                    else if (el.classList.contains("fall")) el.classList.add("animate-fall");
                }, delay);
            }

            function typeWriter() {
                const text = "Togetherness TKJ OnE";
                loadingText.textContent = "";
                let i = 0;
                const timer = setInterval(() => {
                    if (i < text.length) {
                        loadingText.textContent += text.charAt(i++);
                    } else {
                        clearInterval(timer);
                    }
                }, 100);
            }

            typeWriter();
            showElement(loadingText, 0);
            showElement(mainIcon, 800);
            subIcons.forEach((icon, i) => showElement(icon, 1600 + i * 400));
            showElement(designerText2, 3200);
            showElement(designerText, 3600);

            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 55; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 110 + '%';
                particle.style.width = Math.random() * 120 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 13 + 's';
                particlesContainer.appendChild(particle);
            }

            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    if (!checkLoggedInUser()) {
                        document.getElementById('loginModal').style.display = 'flex';
                        checkSecurityCache();
                    }
                }, 1000);
            }, 5500);
        });

        // === FILTER & GALLERY LOGIC (PERBAIKAN UTAMA) ===
        let currentFilter = 'group';
        // Keep track of previous sidebar selection so we can restore it after opening the members modal
        let previousSidebarActive = null;
        let photos = [];

        // loadFromLocal - dummy fallback
        async function loadFromLocal() {
            try {
                const response = await fetch('./DB/photos.json');
                if (!response.ok) throw new Error();
                const data = await response.json();
                return data.photos;
            } catch (e) {
                return [{ name: "Zhyllan", gender: "male", url: "https://i.ibb.co/Fqy0Dgdj/4-Nov-14-35-lmc-8-4-1.jpg", date: "2025-11-04" }];
            }
        }

        async function loadPhotosFromDB() {
            try {
                photos = await loadFromLocal();
                if (!Array.isArray(photos)) {
                    console.warn('Photos data is not an array, using fallback');
                    photos = [];
                }
                performSearch('');
            } catch (err) {
                console.error('Error loading photos:', err);
                photos = [];
                performSearch('');
            }
        }

        function performSearch(query) {
            try {
                // Tampilkan loading saat pencarian
                const searchLoadingContainer = document.getElementById('searchLoadingContainer');
                if (searchLoadingContainer) {
                    searchLoadingContainer.classList.add('show');
                }

                let results = [...(photos || [])];
                if (query.trim()) {
                    results = results.filter(p =>
                        (p.name && p.name.toLowerCase().includes(query.toLowerCase())) ||
                        (p.date && formatDate(p.date).includes(query.replace(/\D/g, '')))
                    );
                }

                // ‚úÖ PERBAIKAN FILTER "GROUP" ‚Üí tampilkan SEMUA
                if (currentFilter === 'male') {
                    results = results.filter(p => p.gender === 'male');
                } else if (currentFilter === 'female') {
                    results = results.filter(p => p.gender === 'female');
                } else if (currentFilter === 'video') {
                    results = results.filter(p => p.gender === 'video');
                }
                // Jika 'group' atau 'all' ‚Üí tidak filter

                // Delay kecil untuk smooth transition
                setTimeout(() => {
                    renderGallery(results);
                }, 100);
            } catch (err) {
                console.error('Search error:', err);
                const searchLoadingContainer = document.getElementById('searchLoadingContainer');
                if (searchLoadingContainer) {
                    searchLoadingContainer.classList.remove('show');
                }
                renderGallery([]);
            }
        }

        function formatDate(dateStr) {
            if (!dateStr) return '';
            const [y, m, d] = dateStr.split('-');
            return `${d}-${m}-${y}`;
        }

        function renderGallery(filteredPhotos) {
            const container = document.getElementById('galleryContainer');
            const noResultsMsg = document.getElementById('noResultsMessage');
            const searchLoadingContainer = document.getElementById('searchLoadingContainer');
            const currentQuery = document.getElementById('searchInput').value.trim();

            // Sembunyikan loading setelah selesai
            if (searchLoadingContainer) {
                searchLoadingContainer.classList.remove('show');
            }

            // Update statistik
            const photoStats = document.getElementById('photoStats');
            if (photoStats) {
                const totalPhotos = photos.filter(p => p.gender !== 'video').length;
                const totalVideos = photos.filter(p => p.gender === 'video').length;
                const displayedPhotos = filteredPhotos.filter(p => p.gender !== 'video').length;
                const displayedVideos = filteredPhotos.filter(p => p.gender === 'video').length;
                photoStats.textContent = `Total: ${totalPhotos} foto | ${totalVideos} video | Ditampilkan: ${displayedPhotos} foto | ${displayedVideos} video`;
            }

            if (filteredPhotos.length === 0 && currentQuery) {
                document.getElementById('searchedTerm').textContent = currentQuery;
                noResultsMsg.style.display = 'block';
                container.innerHTML = '';
                return;
            }

            noResultsMsg.style.display = 'none';
            container.innerHTML = '';
            const groups = {};
            filteredPhotos.forEach(photo => {
                const letter = (photo.name || '?').charAt(0).toUpperCase();
                if (!groups[letter]) groups[letter] = [];
                groups[letter].push(photo);
            });

            Object.keys(groups).sort().forEach(letter => {
                const section = document.createElement('div');
                section.className = 'letter-section';
                section.innerHTML = `<h2 class="letter-header">${letter}</h2><div class="gallery-grid" id="grid-${letter}"></div>`;
                container.appendChild(section);
                const grid = section.querySelector(`#grid-${letter}`);
                groups[letter].forEach(photo => {
                    const item = document.createElement('div');
                    item.className = 'gallery-item';
                    const formattedDate = formatDate(photo.date);
                    item.innerHTML = `
                        <div class="loading" style="width:90px;height:90px;">
                            <span></span><span></span><span></span><span></span><span></span>
                            <span></span><span></span><span></span><span></span><span></span>
                            <span></span><span></span><span></span>
                        </div>
                        <img src="${photo.url}" alt="${photo.name}" style="width:100%;height:180px;object-fit:cover;background:#222;">
                        <div class="gallery-item-name">${photo.name}</div>
                        <div class="gallery-item-date">${formattedDate}</div>
                    `;
                    item.onclick = () => openModal(photo.url, photo.name, photo.date, photo.gender);
                    grid.appendChild(item);
                    
                    // Tampilkan loading saat gambar sedang dimuat
                    const img = item.querySelector('img');
                    const loading = item.querySelector('.loading');
                    if (img && loading) {
                        loading.style.display = 'flex';
                        img.onload = () => { loading.style.display = 'none'; };
                        img.onerror = () => { loading.style.display = 'none'; };
                    }
                });
            });
        }

        // === MODAL ===
        function openModal(url, name, date, gender) {
            try {
                const modal = document.getElementById('imageModal');
                const img = document.getElementById('modalImage');
                const video = document.getElementById('modalVideo');
                const modalLoading = document.getElementById('modalLoadingContainer');
                const isVideo = gender === 'video' || /\.(mp4|avi|mov|wmv|flv|webm|mkv)$/i.test(url || '');

                document.getElementById('modalName').textContent = name || 'No name';
                document.getElementById('modalDate').textContent = date ? formatDate(date) : 'No date';

                img.style.display = 'none';
                video.style.display = 'none';
                if (modalLoading) {
                    modalLoading.style.display = 'flex';
                }

                const downloadBtn = document.getElementById('downloadBtn');
                if (isVideo) {
                    video.style.display = 'block';
                    video.src = url || '';
                    video.onloadstart = () => {
                        if (modalLoading) modalLoading.style.display = 'flex';
                    };
                    video.oncanplay = () => {
                        if (modalLoading) modalLoading.style.display = 'none';
                    };
                    // Hide download button for video items (use native player controls)
                    if (downloadBtn) downloadBtn.style.display = 'none';
                } else {
                    img.style.display = 'block';
                    img.src = url || '';
                    img.onload = () => {
                        if (modalLoading) modalLoading.style.display = 'none';
                    };
                    img.onerror = () => {
                        if (modalLoading) modalLoading.style.display = 'none';
                        console.error('Failed to load image');
                    };
                    if (downloadBtn) downloadBtn.style.display = '';
                }

                modal.classList.add('show');
                // lock body scroll (handles Android touchmove prevention too)
                updateBodyLockState();
            } catch (e) {
                console.error('Error opening modal:', e);
                alert('Gagal membuka media: ' + e.message);
            }
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('show');
            // update lock state (will unlock if nothing else requires lock)
            updateBodyLockState();
        }

        function openMembersModal() {
            const modal = document.getElementById('membersModal');
            const tbody = document.getElementById('membersTableBody');
            
            // Isi tabel dengan anggota
            tbody.innerHTML = ALLOWED_NAMES.map((name, index) => `
                <tr style="border: 1px solid #00ff88; ${index % 2 === 0 ? 'background: rgba(0, 255, 136, 0.05);' : ''}">
                    <td style="padding: 10px; color: var(--text-primary); font-weight: bold;">${index + 1}</td>
                    <td style="padding: 10px; color: var(--text-primary);">${name}</td>
                </tr>
            `).join('');
            
            // Pastikan modal anggota tampil di atas login modal jika sedang terbuka
            modal.style.zIndex = 10002;
            modal.classList.add('show');
            // lock body scroll (handles Android touchmove prevention too)
            updateBodyLockState();
        }

        function closeMembersModal() {
            const modal = document.getElementById('membersModal');
            modal.classList.remove('show');
            modal.style.zIndex = '';
            // update lock state (will unlock if nothing else requires lock)
            updateBodyLockState();
            // Restore previous sidebar selection so the user doesn't see members as a selected section
            try {
                if (previousSidebarActive) {
                    document.querySelectorAll('.sidebar-nav-link').forEach(l => l.classList.remove('active'));
                    previousSidebarActive.classList.add('active');

                    if (previousSidebarActive.dataset.target === 'about') {
                        if (document.getElementById('section-all')) document.getElementById('section-all').style.display = 'none';
                        if (document.getElementById('section-about')) document.getElementById('section-about').style.display = 'block';
                    } else {
                        currentFilter = previousSidebarActive.dataset.filter || 'group';
                        if (document.getElementById('section-about')) document.getElementById('section-about').style.display = 'none';
                        if (document.getElementById('section-all')) document.getElementById('section-all').style.display = 'block';
                        // re-run search to update visible gallery based on restored filter
                        try { performSearch(document.getElementById('searchInput').value.trim()); } catch (e) { /* ignore */ }
                    }
                }
            } catch (e) {
                console.warn('Failed to restore previous sidebar selection', e);
            }
            previousSidebarActive = null;
        }

        // === NAVIGASI SIDEBAR ===
        document.querySelectorAll('.sidebar-nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();

                // Save previous active link so we can restore later (useful when opening members modal)
                const currentlyActive = document.querySelector('.sidebar-nav-link.active');
                previousSidebarActive = (currentlyActive && currentlyActive !== link) ? currentlyActive : null;

                // Update active class visually
                document.querySelectorAll('.sidebar-nav-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');

                if (link.dataset.target === 'about') {
                    document.getElementById('section-all').style.display = 'none';
                    document.getElementById('section-about').style.display = 'block';
                    return;
                }

                if (link.dataset.target === 'members') {
                    // Hide main sections because members content is shown in modal
                    document.getElementById('section-all').style.display = 'none';
                    document.getElementById('section-about').style.display = 'none';
                    openMembersModal();
                    return;
                }

                // Normal filter links
                currentFilter = link.dataset.filter || 'group';
                document.getElementById('section-about').style.display = 'none';
                document.getElementById('section-all').style.display = 'block';
                performSearch(document.getElementById('searchInput').value.trim());
            });
        });

        // === SEARCH ===
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                try {
                    performSearch(e.target.value.trim());
                } catch (err) {
                    console.error('Search error:', err);
                }
            });
        }

        // === CLEAR CACHE BUTTON ===
        document.addEventListener('DOMContentLoaded', () => {
            const clearCacheBtn = document.getElementById('clearCacheBtn');
            if (clearCacheBtn) {
                clearCacheBtn.addEventListener('click', () => {
                    if (confirm('Hapus semua cache? Halaman akan di-refresh.')) {
                        try {
                            localStorage.clear();
                            sessionStorage.clear();
                            if ('caches' in window) {
                                caches.keys().then(names => {
                                    names.forEach(name => caches.delete(name));
                                }).catch(e => console.log('Cache clear error:', e));
                            }
                            setTimeout(() => {
                                location.reload();
                            }, 500);
                        } catch (e) {
                            console.error('Error clearing cache:', e);
                            alert('Gagal menghapus cache: ' + e.message);
                        }
                    }
                });
            }
        });

        // === SIDEBAR COLLAPSE ===
        const collapseBtn = document.getElementById('sidebarCollapse');
        if (collapseBtn) {
            collapseBtn.addEventListener('click', () => {
                const sidebar = document.getElementById('sidebar');
                const body = document.body;
                if (sidebar.classList.contains('collapsed')) {
                    sidebar.classList.remove('collapsed');
                    body.classList.remove('sidebar-collapsed');
                    collapseBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
                } else {
                    sidebar.classList.add('collapsed');
                    body.classList.add('sidebar-collapsed');
                    collapseBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';
                }
            });
        }

        // === KEYBOARD SHORTCUTS ===
        document.addEventListener('keydown', (e) => {
            try {
                const key = e.key.toLowerCase();
                const modal = document.getElementById('imageModal');
                const isModalOpen = modal && modal.classList.contains('show');
                const shortcutsHint = document.getElementById('keyboardShortcutsHint');
                
                // ? atau / - Show/Hide Keyboard Shortcuts
                if (key === '?' || key === '/') {
                    if (shortcutsHint) {
                        shortcutsHint.classList.toggle('show');
                        e.preventDefault();
                    }
                }
                
                // ESC - Tutup modal
                if (e.key === 'Escape') {
                    if (isModalOpen) {
                        closeModal();
                        e.preventDefault();
                    } else if (shortcutsHint && shortcutsHint.classList.contains('show')) {
                        shortcutsHint.classList.remove('show');
                        e.preventDefault();
                    }
                }
                
                // C atau c - Toggle collapse sidebar
                if (key === 'c') {
                    const collapseBtn = document.getElementById('sidebarCollapse');
                    if (collapseBtn) {
                        collapseBtn.click();
                        e.preventDefault();
                    }
                }
                
                // M atau m - Toggle menu (mobile)
                if (key === 'm') {
                    const toggleBtn = document.getElementById('sidebarToggle');
                    const sidebar = document.getElementById('sidebar');
                    if (toggleBtn && sidebar) {
                            sidebar.classList.toggle('active');
                            // update body lock so only sidebar can scroll on mobile
                            updateBodyLockState();
                            e.preventDefault();
                        }
                }
                
                // D atau d - Download (hanya jika modal terbuka)
                if (key === 'd' && isModalOpen) {
                    const videoEl = document.getElementById('modalVideo');
                    // Jika modal sedang menampilkan video, jangan trigger download
                    if (videoEl && videoEl.style.display !== 'none') {
                        e.preventDefault();
                    } else {
                        const downloadBtn = document.getElementById('downloadBtn');
                        if (downloadBtn) {
                            downloadBtn.click();
                            e.preventDefault();
                        }
                    }
                }
                
                // R atau r - Hapus cache
                if (key === 'r') {
                    if (confirm('Hapus semua cache? Halaman akan di-refresh.')) {
                        try {
                            localStorage.clear();
                            sessionStorage.clear();
                            if ('caches' in window) {
                                caches.keys().then(names => {
                                    names.forEach(name => caches.delete(name));
                                }).catch(e => console.log('Cache clear error:', e));
                            }
                            setTimeout(() => {
                                location.reload();
                            }, 500);
                        } catch (err) {
                            console.error('Error clearing cache:', err);
                            alert('Gagal menghapus cache: ' + err.message);
                        }
                    }
                    e.preventDefault();
                }
            } catch (err) {
                console.error('Keyboard shortcut error:', err);
            }
        });

        // === MOBILE TOGGLE ===
        const toggleBtn = document.getElementById('sidebarToggle');
        const sidebar = document.getElementById('sidebar');
        if (toggleBtn) {
            toggleBtn.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                // Ensure body locking state updates when sidebar opens/closes
                updateBodyLockState();
            });
        }

        // === BLOCKING PROTECTION ===
        // 1. Blokir RIGHT-CLICK (Desktop)
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            return false;
        });

        // 2. Blokir LONG-PRESS (Mobile) - detect touch-hold
        let touchStartTime = 0;
        const LONG_PRESS_DURATION = 500; // ms

        document.addEventListener('touchstart', (e) => {
            touchStartTime = Date.now();
        }, false);

        document.addEventListener('touchend', (e) => {
            const touchDuration = Date.now() - touchStartTime;
            if (touchDuration > LONG_PRESS_DURATION) {
                // Long press detected
                e.preventDefault();
            }
        }, false);

        // Prevent background touch-scroll on mobile when overlays/sidebars are open
        // Scroll lock configuration - can be customized at runtime
        const scrollLockConfig = {
            allowScrollSelectors: ['#sidebar'], // selectors that should remain scrollable when locked
            lockOnModal: true,                  // lock body when image/member modal opens
            lockOnSidebar: true                 // lock body when sidebar is active
        };

        // Current touchmove handler reference so we can remove it reliably
        let _currentTouchMoveHandler = null;

        function _createTouchMoveHandler() {
            return function (ev) {
                try {
                    // If the touchstart / touchmove originated inside an allowed scrollable element, allow it
                    for (const sel of (scrollLockConfig.allowScrollSelectors || [])) {
                        if (!sel) continue;
                        const el = ev.target && ev.target.closest && ev.target.closest(sel);
                        if (el) return; // allow scrolling inside this element
                    }
                } catch (e) {
                    // ignore selector errors and fall back to blocking
                }
                ev.preventDefault();
            };
        }

        function lockBodyScroll() {
            try {
                document.body.style.overflow = 'hidden';
                if (_currentTouchMoveHandler) {
                    document.removeEventListener('touchmove', _currentTouchMoveHandler, { passive: false });
                }
                _currentTouchMoveHandler = _createTouchMoveHandler();
                document.addEventListener('touchmove', _currentTouchMoveHandler, { passive: false });
            } catch (e) { console.warn('lockBodyScroll failed', e); }
        }

        function unlockBodyScroll() {
            try {
                document.body.style.overflow = '';
                if (_currentTouchMoveHandler) {
                    document.removeEventListener('touchmove', _currentTouchMoveHandler, { passive: false });
                    _currentTouchMoveHandler = null;
                }
            } catch (e) { console.warn('unlockBodyScroll failed', e); }
        }

        function setScrollLockConfig(newConfig) {
            Object.assign(scrollLockConfig, newConfig || {});
            // when config changes, re-evaluate lock state
            updateBodyLockState();
        }

        function updateBodyLockState() {
            const sidebar = document.getElementById('sidebar');
            const imgModal = document.getElementById('imageModal');
            const membersModal = document.getElementById('membersModal');
            const sidebarActive = sidebar && sidebar.classList.contains('active');
            const modalOpen = (imgModal && imgModal.classList.contains('show')) || (membersModal && membersModal.classList.contains('show'));
            const shouldLock = (scrollLockConfig.lockOnModal && modalOpen) || (scrollLockConfig.lockOnSidebar && sidebarActive);
            if (shouldLock) {
                lockBodyScroll();
            } else {
                unlockBodyScroll();
            }
        }

        // 3. Blokir COPY (Ctrl+C / Cmd+C dan select text copy)
        document.addEventListener('copy', (e) => {
            e.preventDefault();
            return false;
        });

        // 4. Blokir SELECT TEXT (Ctrl+A dan drag select)
        document.addEventListener('selectstart', (e) => {
            // Izinkan select di input dan textarea
            if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
                return false;
            }
        });

        // 5. Blokir CUT (Ctrl+X / Cmd+X)
        document.addEventListener('cut', (e) => {
            e.preventDefault();
            return false;
        });

        // 6. Blokir PASTE jika ada
        document.addEventListener('paste', (e) => {
            // Hanya blokir di luar input fields
            if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
            }
        });

        // 7. Blokir DRAG IMAGE (cegah drag gambar otomatis download)
        document.addEventListener('dragstart', (e) => {
            if (e.target.tagName === 'IMG' || e.target.tagName === 'VIDEO') {
                e.preventDefault();
            }
        });

        // === FAST MODE HANDLER ===
        function applyFastMode(enabled) {
            try {
                if (enabled) {
                    document.body.classList.add('fast-mode');
                    localStorage.setItem('fastMode', '1');
                } else {
                    document.body.classList.remove('fast-mode');
                    localStorage.removeItem('fastMode');
                }
            } catch (e) { console.warn('applyFastMode failed', e); }
        }

        function initFastModeToggle() {
            try {
                const toggle = document.getElementById('fastModeToggle');
                if (!toggle) return;
                // Initialize from localStorage
                const saved = localStorage.getItem('fastMode');
                const enabled = saved === '1' || saved === 'true';
                toggle.checked = !!enabled;
                applyFastMode(enabled);

                toggle.addEventListener('change', (e) => {
                    applyFastMode(!!e.target.checked);
                });
            } catch (e) { console.warn('initFastModeToggle error', e); }
        }

        // Initialize fast-mode toggle after DOM ready
        try {
            if (document.readyState === 'complete' || document.readyState === 'interactive') {
                setTimeout(initFastModeToggle, 30);
            } else {
                document.addEventListener('DOMContentLoaded', initFastModeToggle);
            }
        } catch (e) {
            console.warn('Fast mode init failed', e);
        }
    </script>
</body>
</html>
